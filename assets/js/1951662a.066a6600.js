"use strict";(self.webpackChunkkubeblocks_io=self.webpackChunkkubeblocks_io||[]).push([[8014],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>d});var l=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},o=Object.keys(e);for(l=0;l<o.length;l++)a=o[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=l.createContext({}),u=function(e){var t=l.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=u(e.components);return l.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},k=l.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(a),k=n,d=c["".concat(s,".").concat(k)]||c[k]||m[k]||o;return a?l.createElement(d,r(r({ref:t},p),{},{components:a})):l.createElement(d,r({ref:t},p))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,r=new Array(o);r[0]=k;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:n,r[1]=i;for(var u=2;u<o;u++)r[u]=a[u];return l.createElement.apply(null,r)}return l.createElement.apply(null,a)}k.displayName="MDXCreateElement"},85083:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var l=a(87462),n=(a(67294),a(3905));const o={},r="KubeBlocks 0.4.0 (2023-02-28)",i={unversionedId:"release_notes/v0.4.0",id:"version-release-0.4/release_notes/v0.4.0",title:"KubeBlocks 0.4.0 (2023-02-28)",description:"We are happy to announce the release of KubeBlocks 0.4.0 with some exciting new features and improvements. With support for PostgreSQL, Redis, and Kafka, you will now have more options for data storage and messaging. Additionally, the ability to stop and resume the cluster, reconfigure cluster parameters, migrate Floating IPs, and access outside of K8s clusters will make managing KubeBlocks easier and more flexible. TLS will provide added security and improved data transfer. It's great to see KubeBlocks continuing to evolve and become even more powerful.",source:"@site/versioned_docs/version-release-0.4/release_notes/v0.4.0.md",sourceDirName:"release_notes",slug:"/release_notes/v0.4.0",permalink:"/docs/release-0.4/release_notes/v0.4.0",draft:!1,editUrl:"https://github.com/apecloud/kubeblocks/tree/release-0.4/docs/release_notes/v0.4.0.md",tags:[],version:"release-0.4",frontMatter:{},sidebar:"release_notes",previous:{title:"KubeBlocks 0.3.8 (2023-02-12)",permalink:"/docs/release-0.4/release_notes/v0.3.8"}},s={},u=[{value:"Acknowledgements",id:"acknowledgements",level:2},{value:"What&#39;s Changed",id:"whats-changed",level:2},{value:"New Features",id:"new-features",level:3},{value:"Bug Fixes",id:"bug-fixes",level:3},{value:"Miscellaneous",id:"miscellaneous",level:3},{value:"Breaking Changes",id:"breaking-changes",level:2}],p={toc:u},c="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(c,(0,l.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"kubeblocks-040-2023-02-28"},"KubeBlocks 0.4.0 (2023-02-28)"),(0,n.kt)("p",null,"We are happy to announce the release of KubeBlocks 0.4.0 with some exciting new features and improvements. With support for PostgreSQL, Redis, and Kafka, you will now have more options for data storage and messaging. Additionally, the ability to stop and resume the cluster, reconfigure cluster parameters, migrate Floating IPs, and access outside of K8s clusters will make managing KubeBlocks easier and more flexible. TLS will provide added security and improved data transfer. It's great to see KubeBlocks continuing to evolve and become even more powerful."),(0,n.kt)("p",null,"We would like to extend our appreciation to all contributors who helped make this release happen."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Highlights")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"New addons.extensions.kubeblocks.io API, with Addon management controller, where KubeBlocks allow addon extensions instead of using Helm sub-charts dependencies.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"ClusterDefinition API ",(0,n.kt)("inlineCode",{parentName:"p"},"spec.connectionCredential")," add following built-in variables:")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Service FQDN ",(0,n.kt)("inlineCode",{parentName:"p"},"$(SVC_FQDN)")," placeholder, value pattern - $(CLUSTER_NAME)-$(1ST_COMP_NAME).$(NAMESPACE).svc, where 1ST_COMP_NAME is the 1st component that provide ",(0,n.kt)("inlineCode",{parentName:"p"},"ClusterDefinition.spec.componentDefs[].service")," attribute")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Service ports ",(0,n.kt)("inlineCode",{parentName:"p"},"$(SVC_PORT_<NAME>)")," placeholder")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"example usage:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},'# ClusterDefinition API\nkind: ClusterDefinition\n  metadata:\n  name: my-clusterdefinition\nspec:\n  connectionCredential:\n    username: "admin" \n    "admin-password": "$(RANDOM_PASSWD)"\n    endpoint: "http://$(SVC_FQDN):$(SVC_PORT_http)"\n\n  componentsDefs:\n    - name: my-comp-type\n      service:\n        ports:\n          - name: http\n            port: 8123\n\n# Cluster API\nkind: Cluster\nmetadata:\n  name: my-cluster\n  namespace: my-ns\nspec:\n  clusterDefinitionRef: my-clusterdefinition\n  componentSpecs:\n    - name: my-comp\n      type: my-comp-type\n\n# output:\nkind: Secret\nmetadata:\n  name: my-cluster-conn-credential\n  namespace: my-ns\n  labels:\n    "app.kubernetes.io/instance": my-cluster\nstringData:\n  username: "admin"\n  admin-password: "<some random 8 characters password>"\n  endpoint: "http://my-cluster-my-comp.my-ns.svc:8123"\n')))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Known issues and limitations")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Limitations of cluster's horizontal scale operation:"),(0,n.kt)("li",{parentName:"ul"},"Only support VolumeSnapshot API to make a clone of Cluster's PV for syncing data when horizontal scaling."),(0,n.kt)("li",{parentName:"ul"},"Only first pod container and 1st volume mount associated PV will be processed for VolumeSnapshot, do assure that data volume is placed in 1st pod container's 1st volume mount."),(0,n.kt)("li",{parentName:"ul"},"Unused PVCs will be deleted in 30 minutes after scaling in.")),(0,n.kt)("p",null,"If you're new to KubeBlocks, visit the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/apecloud/kubeblocks/blob/v0.4.0/docs/user_docs/quick_start_guide.md"},"getting started")," page and get a quick start with KubeBlocks."),(0,n.kt)("p",null,"See ",(0,n.kt)("a",{parentName:"p",href:"#upgrading-to-kubeblocks-0.4.0"},"this")," section to upgrade KubeBlocks to version 0.4.0."),(0,n.kt)("h2",{id:"acknowledgements"},"Acknowledgements"),(0,n.kt)("p",null,"Thanks to everyone who made this release possible!"),(0,n.kt)("p",null,"@free6om, @heng4fun, @iziang, @JashBook, @ldming, @linghan-hub, @lynnleelhl, @nashtsai, @wangyelei, @weicao, @xuriwuyun, @Y-Rookie, @yangmeilly, @ZhaoDiankui"),(0,n.kt)("h2",{id:"whats-changed"},"What's Changed"),(0,n.kt)("h3",{id:"new-features"},"New Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"support PostgreSQL standalone with features such as reconfiguration, horizontal scaling, backup and restore, and more. (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1255"},"#1255"),", @ZhaoDiankui)"),(0,n.kt)("li",{parentName:"ul"},"support tls self signed certs provision for MySQL and PostgreSQL (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1424"},"#1424"),", @free6om)"),(0,n.kt)("li",{parentName:"ul"},"support running logs of PostgreSQL (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1415"},"#1415"),", @yangmeilly)"),(0,n.kt)("li",{parentName:"ul"},"support creation of ReplicationSet cluster that include Redis/Apecloud MySQL (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/915"},"#915"),", @Y-Rookie)"),(0,n.kt)("li",{parentName:"ul"},"support Redis features include restart/vertical-scal/upgrade  (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1530"},"#1530"),", @heng4fun)"),(0,n.kt)("li",{parentName:"ul"},"support using CLI to connect to Redis (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1622"},"#1622"),", @heng4fun)"),(0,n.kt)("li",{parentName:"ul"},"support Redis grafana dashboard (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1658"},"#1658"),", @heng4fun)"),(0,n.kt)("li",{parentName:"ul"},"support Redis alerts(",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1664"},"#1664"),", @heng4fun)"),(0,n.kt)("li",{parentName:"ul"},"support generate random cluster name if name is not specified (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1175"},"#1175"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"support command channel that used by KubeBlocks Controller, providing atomic operations, and shielding the differences between engines. (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1469"},"#1469"),", @xuriwuyun)"),(0,n.kt)("li",{parentName:"ul"},"support cluster pods allocating in dedicated or sharded nodes according to requirements  (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1553"},"#1553"),", @heng4fun)"),(0,n.kt)("li",{parentName:"ul"},"each operation has its own corresponding status in cluster and improve the cluster status manage (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1071"},"#1071"),", @wangyelei)"),(0,n.kt)("li",{parentName:"ul"},"add built-in node affinity and tolerations for KubeBlocks and cluster (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1613"},"#1613"),", @heng4fun)"),(0,n.kt)("li",{parentName:"ul"},"cli support auto-approve flag to skip interactive approval (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1641"},"#1641"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"remove pvc when uninstall KubeBlocks (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1644"},"#1644"),", @ldming)")),(0,n.kt)("h3",{id:"bug-fixes"},"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"ginkgo v2 error fix (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1011"},"#1011"),", @lynnleelhl)"),(0,n.kt)("li",{parentName:"ul"},"fixed deploy/postgresqlcluster/templates/cluster.yaml template error (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1043"},"#1043"),", @nashtsai)"),(0,n.kt)("li",{parentName:"ul"},"fixed PostgreSQL chart conf volume error (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1045"},"#1045"),", @nashtsai)"),(0,n.kt)("li",{parentName:"ul"},"terminate the cli installation if error occurs (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1147"},"#1147"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"build kbcli with CGO_ENABLED=0 (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1339"},"#1339"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"container run as root and rename cd.name (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1461"},"#1461"),", @ZhaoDiankui)"),(0,n.kt)("li",{parentName:"ul"},"check sts and pods revision (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1470"},"#1470"),", @heng4fun)"),(0,n.kt)("li",{parentName:"ul"},"install nyancat failed when KubeBlocks repo does not exist (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1474"},"#1474"),", @heng4fun)")),(0,n.kt)("h3",{id:"miscellaneous"},"Miscellaneous"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"avoid making outputs annoying messages when docker is not started (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1030"},"#1030"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"PostgreSQL ClusterDefinition chart tidy up (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1042"},"#1042"),", @nashtsai)"),(0,n.kt)("li",{parentName:"ul"},"support/improve get available container ports (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1050"},"#1050"),", @weicao)"),(0,n.kt)("li",{parentName:"ul"},"add timeout to avoid test case failure due to timeout (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1063"},"#1063"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"improve OpsRequest to pass with usingExistingCluster set (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1088"},"#1088"),", @weicao)"),(0,n.kt)("li",{parentName:"ul"},"group cli cluster help info (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1163"},"#1163"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"update probe lib (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1207"},"#1207"),", @xuriwuyun)"),(0,n.kt)("li",{parentName:"ul"},"cli set cluster default cpu and memory (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1254"},"#1254"),", @ldming)"),(0,n.kt)("li",{parentName:"ul"},"release kbcli/helm-chart to gitlab (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1306"},"#1306"),", @JashBook)"),(0,n.kt)("li",{parentName:"ul"},"add helm chart images check to ci (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1412"},"#1412"),", @JashBook)"),(0,n.kt)("li",{parentName:"ul"},"release images to aliyun (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1445"},"#1445"),", @JashBook)"),(0,n.kt)("li",{parentName:"ul"},"add smoke tests (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1532"},"#1532"),", @linghan-hub)"),(0,n.kt)("li",{parentName:"ul"},"image check ignore KubeBlocks (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1554"},"#1554"),", @JashBook)"),(0,n.kt)("li",{parentName:"ul"},"add release-version.yml (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1668"},"#1668"),", @JashBook)"),(0,n.kt)("li",{parentName:"ul"},"change push tag actions (",(0,n.kt)("a",{parentName:"li",href:"https://github.com/apecloud/kubeblocks/pull/1671"},"#1671"),", @JashBook)")),(0,n.kt)("p",null,"Release Notes for ",(0,n.kt)("inlineCode",{parentName:"p"},"v0.4.0"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Rename group name ",(0,n.kt)("inlineCode",{parentName:"li"},"dbaas.kubeblocks.io")," to ",(0,n.kt)("inlineCode",{parentName:"li"},"apps.kubeblocks.io"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"upgrade KubeBlocks to create new CRDs, after that, you can delete the CRDs with group name",(0,n.kt)("inlineCode",{parentName:"li"},"dbaas.kubeblocks.io"))))),(0,n.kt)("h2",{id:"breaking-changes"},"Breaking Changes"),(0,n.kt)("p",null,"None."))}m.isMDXComponent=!0}}]);