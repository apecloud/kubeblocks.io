"use strict";(self.webpackChunkkubeblocks_io=self.webpackChunkkubeblocks_io||[]).push([[3960],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(67294);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var c=n.createContext({}),u=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},i="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,s=e.mdxType,a=e.originalType,c=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),i=u(r),d=s,f=i["".concat(c,".").concat(d)]||i[d]||m[d]||a;return r?n.createElement(f,l(l({ref:t},p),{},{components:r})):n.createElement(f,l({ref:t},p))}));function f(e,t){var r=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var a=r.length,l=new Array(a);l[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[i]="string"==typeof e?e:s,l[1]=o;for(var u=2;u<a;u++)l[u]=r[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},17948:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>u});var n=r(87462),s=(r(67294),r(3905));const a={title:"Stop/Start a MySQL cluster",description:"How to start/stop a MySQL cluster",sidebar_position:5,sidebar_label:"Stop/Start"},l="Stop/Start MySQL Cluster",o={unversionedId:"user_docs/kubeblocks-for-mysql/cluster-management/start-stop-a-cluster",id:"version-release-0.4/user_docs/kubeblocks-for-mysql/cluster-management/start-stop-a-cluster",title:"Stop/Start a MySQL cluster",description:"How to start/stop a MySQL cluster",source:"@site/versioned_docs/version-release-0.4/user_docs/kubeblocks-for-mysql/cluster-management/start-stop-a-cluster.md",sourceDirName:"user_docs/kubeblocks-for-mysql/cluster-management",slug:"/user_docs/kubeblocks-for-mysql/cluster-management/start-stop-a-cluster",permalink:"/docs/release-0.4/user_docs/kubeblocks-for-mysql/cluster-management/start-stop-a-cluster",draft:!1,editUrl:"https://github.com/apecloud/kubeblocks/tree/release-0.4/docs/user_docs/kubeblocks-for-mysql/cluster-management/start-stop-a-cluster.md",tags:[],version:"release-0.4",sidebarPosition:5,frontMatter:{title:"Stop/Start a MySQL cluster",description:"How to start/stop a MySQL cluster",sidebar_position:5,sidebar_label:"Stop/Start"},sidebar:"docs",previous:{title:"Restart",permalink:"/docs/release-0.4/user_docs/kubeblocks-for-mysql/cluster-management/restart-mysql-cluster"},next:{title:"Delete protection",permalink:"/docs/release-0.4/user_docs/kubeblocks-for-mysql/cluster-management/delete-mysql-cluster"}},c={},u=[{value:"Stop a cluster",id:"stop-a-cluster",level:2},{value:"Option 1. (Recommended) Use kbcli",id:"option-1-recommended-use-kbcli",level:3},{value:"Option 2. Create an OpsRequest",id:"option-2-create-an-opsrequest",level:3},{value:"Option 3. Change the YAML file of the cluster",id:"option-3-change-the-yaml-file-of-the-cluster",level:3},{value:"Start a cluster",id:"start-a-cluster",level:2},{value:"Option 1. (Recommended) Use kbcli",id:"option-1-recommended-use-kbcli-1",level:3},{value:"Option 2. Create an OpsRequest",id:"option-2-create-an-opsrequest-1",level:3},{value:"Option 3. Change the YAML file of the cluster",id:"option-3-change-the-yaml-file-of-the-cluster-1",level:3}],p={toc:u},i="wrapper";function m(e){let{components:t,...r}=e;return(0,s.kt)(i,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"stopstart-mysql-cluster"},"Stop/Start MySQL Cluster"),(0,s.kt)("p",null,"You can stop/start a cluster to save computing resources. When a cluster is stopped, the computing resources of this cluster are released, which means the pods of Kubernetes are released, but the storage resources are reserved. Start this cluster again if you want to restore the cluster resources from the original storage by snapshots."),(0,s.kt)("h2",{id:"stop-a-cluster"},"Stop a cluster"),(0,s.kt)("h3",{id:"option-1-recommended-use-kbcli"},"Option 1. (Recommended) Use kbcli"),(0,s.kt)("p",null,"Configure the name of your cluster and run the command below to stop this cluster. "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"kbcli cluster stop <name>\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Example"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"kbcli cluster stop mysql-cluster\n")),(0,s.kt)("h3",{id:"option-2-create-an-opsrequest"},"Option 2. Create an OpsRequest"),(0,s.kt)("p",null,"Run the command below to stop a cluster."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f - <<EOF\napiVersion: apps.infracreate.com/v1alpha1\nkind: OpsRequest\nmetadata:\n  generate-name: stop-\nspec:\n  # cluster ref\n  clusterRef: mysql-cluster\n  type: Stop\nEOF\n")),(0,s.kt)("h3",{id:"option-3-change-the-yaml-file-of-the-cluster"},"Option 3. Change the YAML file of the cluster"),(0,s.kt)("p",null,"Configure replicas as 0 to delete pods."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps.kubeblocks.io/v1alpha1\nkind: Cluster\nmetadata:\n    name: mysql-cluster\nspec:\n  clusterDefinitionRef: apecloud-mysql\n  clusterVersionRef: ac-mysql-8.0.30\n  terminationPolicy: WipeOut\n  components:\n  - name: mysql\n    type: mysql\n    monitor: false  \n    replicas: 0\n    volumeClaimTemplates:\n    - name: data\n      spec:\n        storageClassName: standard\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: 1Gi\n")),(0,s.kt)("h2",{id:"start-a-cluster"},"Start a cluster"),(0,s.kt)("h3",{id:"option-1-recommended-use-kbcli-1"},"Option 1. (Recommended) Use kbcli"),(0,s.kt)("p",null,"Configure the name of your cluster and run the command below to stop this cluster. "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"kbcli cluster start <name>\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Example"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"kbcli cluster start mysql-cluster\n")),(0,s.kt)("h3",{id:"option-2-create-an-opsrequest-1"},"Option 2. Create an OpsRequest"),(0,s.kt)("p",null,"Run the command below to start a cluster."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f - <<EOF\napiVersion: apps.infracreate.com/v1alpha1\nkind: OpsRequest\nmetadata:\n  generate-name: start-\nspec:\n  # cluster ref\n  clusterRef: mysql-cluster\n  type: Start\nEOF \n")),(0,s.kt)("h3",{id:"option-3-change-the-yaml-file-of-the-cluster-1"},"Option 3. Change the YAML file of the cluster"),(0,s.kt)("p",null,"Change replicas back to the original amount to start this cluster again."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps.kubeblocks.io/v1alpha1\nkind: Cluster\nmetadata:\n    name: mysql-cluster\nspec:\n  clusterDefinitionRef: apecloud-mysql\n  clusterVersionRef: ac-mysql-8.0.30\n  terminationPolicy: WipeOut\n  components:\n  - name: mysql\n    type: mysql\n    monitor: false  \n    replicas: 3\n    volumeClaimTemplates:\n    - name: data\n      spec:\n        storageClassName: standard\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: 1Gi\n")))}m.isMDXComponent=!0}}]);